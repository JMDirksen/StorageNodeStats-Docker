<!DOCTYPE html>
<html>

<head>
    <title>Chart</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script>
        google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var queryOptions = {
                csvColumns: ['datetime', 'number', 'number', 'number'],
                csvHasHeader: true
            };
            var query = new google.visualization.Query('stats.csv', queryOptions);
            query.send(handleQueryResponse);
        }

        function handleQueryResponse(response) {
            if (response.isError()) {
                alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
                return;
            }
            var data = response.getDataTable();
            var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
            var options = {
                title: 'StorageNode Stats',
                series: {
                    0: { targetAxisIndex: 0 }, // Used TB left
                    1: { targetAxisIndex: 0 }, // Total TB left
                    2: { targetAxisIndex: 1 }, // Payout $ right
                },
                axes: {
                    y: {
                        0: {
                            label: 'TB',
                            format: '#,### TB'
                        },
                        1: {
                            label: '$',
                            format: '#,## $'
                        }
                    }
                },
                width: 1000,
                height: 600,
                hAxis: {
                    format: 'dd-MM-yyyy HH:mm'
                },
                //vAxis: {
                //    format: '#,### TB'
                //}

            };
            var dt_formatter = new google.visualization.DateFormat({
                pattern: "dd-MM-yyyy HH:mm"
            });
            dt_formatter.format(data, 0);
            chart.draw(data, options);
        }
    </script>
</head>

<body>
    <div id="chart_div" style="width: 600px; height: 440px;"></div>
</body>

</html>